/*
Richarea

Cross browser richarea (iframe) munipulator script written in CoffeeScript

:Author: Alisue (lambdalisue@hashnote.net)
:License: MIT License
:Url: http://github.com/lambdalisue/Richarea
:Version: 0.1.0
:Reference:
- http://help.dottoro.com/ljcvtcaw.php
- http://wiki.bit-hive.com/tomizoo/pg/JavaScript%20Range%A4%CE%BB%C8%A4%A4%CA%FD
- http://www.mozilla-japan.org/editor/midas-spec.html
- https://bugzilla.mozilla.org/show_bug.cgi?id=297494
*/
eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('(5(){o g,y,F;o h=2S.7.1w||5(a){10(o i=0,l=3.I;i<l;i++){6(3[i]===a)4 i}4-1},1x=5(a,b){4 5(){4 a.2T(b,2U)}};g=(5(){5 g(){3.A=3.1y(3.26)||"1z 1A A";3.2V=3.1B(u.L)||3.1B(u.2W)||"1z 1A A";3.27=3.1y(3.28)||"1z 1A 27"}g.7.1y=5(a){o b,J,11,G;G=[];10(J=0,11=a.I;J<11;J++){b=a[J];3.1C=b.W||b.q;6(b.v!=9){6(b.v.1w(b.x)!==-1){4 b.q}m 6(b.29){4 b.q}}}4 G};g.7.1B=5(a){o b;b=a.1w(3.1C);6(b===-1){4}4 2X(a.1f(b+3.1C.I+1))};g.7.26=[{v:u.L,x:\'1g\',q:\'1g\'},{v:u.L,x:\'1D\',W:\'1D/\',q:\'1D\'},{v:u.1h,x:\'2Y\',q:\'2Z\',W:\'2a\'},{29:B.30,q:\'31\',W:\'2a\'},{v:u.1h,x:\'2b\',q:\'2b\'},{v:u.1h,x:\'32\',q:\'33\'},{v:u.L,x:\'1i\',q:\'1i\'},{v:u.1h,x:\'2c\',q:\'2c\'},{v:u.L,x:\'1E\',q:\'1E\'},{v:u.L,x:\'2d\',q:\'34\',W:\'2d\'},{v:u.L,x:\'35\',q:\'1F\',W:\'36\'},{v:u.L,x:\'1F\',q:\'1E\',W:\'1F\'}];g.7.28=[{v:u.1G,x:\'37\',q:\'38\'},{v:u.1G,x:\'2e\',q:\'2e\'},{v:u.L,x:\'2f\',q:\'2f/39\'},{v:u.1G,x:\'2g\',q:\'2g\'}];4 g})();F=(5(){5 F(a){3.D=a;6(3.D.2h!=9){3.p=3.D.2h}m{3.p=3.D.2i.p}3.P=3.p.P;6(3.P.2j!=9){3.P.2j=Q}6(3.P.2k!=9){3.P.2k=R}m 6(3.p.2l!=9){3.p.2l=\'3a\'}3.B=3.D.2i}F.7.16=5(a){4 3.p.16(a)};F.7.17=5(a){4 3.p.17(a)};F.7.1j=5(a){4 3.p.1j(a)};F.7.1k=5(a){4 3.p.1k(a)};F.7.1l=5(a){4 3.p.1l(a)};F.7.18=5(a,b,c){6(b==9){b=Q}6(c==9){c=9}4 3.p.18(a,b,c)};4 F})();y=(5(){5 y(){}y.7.19=5(a){4!(a.1H!=9)};y.7.1I=5(a){o b;b=p.1J(\'2m\');b.X=a;4 b.1H};y.7.2n=5(d,e){o f,1K,1L,1M,r,1N;1M=5(a,b){o c,1m,H;10(c 1n a){H=a[c];6(H 2o 3b){1m=1M(H,b[c])}m{1m=H===b[c]}6(!1m){4 Q}}4 R};f=((r=d.1O)!=9?r.1P():w 0)===((1N=e.1O)!=9?1N.1P():w 0);1K=d.2p===e.2p;1L=d.1Q(\'C\')===e.1Q(\'C\');4 f&&1K&&1L};y.7.1R=5(a,b){o c;6(b==9){b=Q}c=b?\'3c\':\'1H\';1a(!3.19(a)){a=a[c]}4 a};y.7.1S=5(a,b){6(b==9){b=Q}1a(!a.n){a=a.j;6(!a){4 9}}a=a.n;6(b){a=3.1R(a,Q)}4 a};y.7.1T=5(a,b){6(b==9){b=Q}1a(!a.1o){a=a.j;6(!a){4 9}}a=a.1o;6(b){a=3.1R(a,R)}4 a};y.7.1b=5(a,b,c,d){o e,1p,n,j,1q,S,T;6(c==9){c=w 0}6(d==9){d=w 0}S=a.3d;6(c==9){c=0}6(d==9){d=S.I}6(c===0&&d===S.I){4 b(a)}m{e=S.1f(0,c);1p=S.1f(c,d);1q=S.1f(d,S.I);j=a.j;n=a.n;j.1c(a);6(e.I>0){T=p.1U(e);j.Y(T,n)}6(1p.I>0){T=p.1U(1p);j.Y(T,n);a=T}6(1q.I>0){T=p.1U(1q);j.Y(T,n)}4 b(a)}};y.7.1V=5(a,b,c,d){o e,J,11,r,G;6(c==9){c=w 0}6(d==9){d=w 0}6(3.19(a)){4 3.1b(a,b,c,d)}m{r=a.1W;G=[];10(J=0,11=r.I;J<11;J++){e=r[J];G.1X(3.1V(e,b))}4 G}};y.7.1Y=5(a,b){o c,1d,Z,1Z,K,M,U,12,r,G;6(a.3e){6(((r=B.V)!=9?r.1r:w 0)!=9){4 V.1r("3f 3g 3h")}}m{K=a.3i(0);M=K.M;12=K.12;c=K.3j;Z=K.Z;a.3k();6(M===c){4 3.1V(M,b,12,Z)}m{6(!3.19(M)){U=M.1W[12]}m{U=3.1S(M,R);3.1b(M,b,12,w 0)}6(!3.19(c)){6(Z>0){1d=c.1W[Z-1]}m{1d=3.1T(c,R)}}m{1d=3.1T(c,R);3.1b(c,b,w 0,Z)}G=[];1a(U){1Z=3.1S(U,R);3.1b(U,b);6(U===1d){3l}G.1X(U=1Z)}4 G}}};4 y})();3.8=(5(){5 8(a){o b;3.D=a;6((B.2q!=9)&&3.D 2o 2q){3.D=3.D.3m(0)}3.A=20 g;3.s=20 F(3.D);3.13=20 y;6(3.D.X!=9){b=3.D.X;b=b.2r(\'&3n;\').2s(\'<\');b=b.2r(\'&3o;\').2s(\'>\');3.2t(b)}}8.7.16=5(a){o b;2u(3.A.A){21\'1g\':4 9;21\'1i\':b=[\'1s\',\'3p\',\'2v\',\'1t\',\'2w\',\'2x\',\'2y\',\'2z\',\'1u\',\'22\',\'23\',\'24\',\'3q\'];6(h.2A(b,a)<0){4 9}}4 3.s.16(a)};8.7.17=5(a){2u(3.A.A){21\'1g\':4 R}4 3.s.17(a)};8.7.1j=5(a){4 3.s.1j(a)};8.7.1k=5(a){4 3.s.1k(a)};8.7.1l=5(a){4 3.s.1l(a)};8.7.18=5(a,b,c){o d;6(b==9){b=w 0}6(c==9){c=w 0}6(!3.17(a)){6(((d=B.V)!=9?d.1r:w 0)!=9){V.1r(""+a+" 3r 3s 3t 1n 3 A")}4}6((b!=9)&&!(c!=9)){c=b;b=Q}4 3.s.18(a,b,c)};8.7.k=5(a,b,c){o d;6(b==9){b=w 0}6(c==9){c=w 0}3.18(a,b,c);d=[];1a(3.16(a)){d.1X({})}4 d};8.7.C=5(c){o d,14,r;6(3.s.B.1e!=9){14=1x(5(a){o b,N,n,j,H,z,r;j=a.j;6(!a.1o&&!a.n){6(((r=j.1O)!=9?r.1P():w 0)===\'2B\'){10(N 1n c){H=c[N];6(j.C[N]===H){j.C[N]=\'\'}m{j.C[N]=H}}6(j.1Q(\'C\')===\'\'){n=j.n;b=j.j;b.1c(j);b.Y(a,n)}4}}z=p.1J(\'2B\');10(N 1n c){H=c[N];z.C[N]=H}n=a.n;j.1c(a);z.25(a);4 j.Y(z,n)},3);d=3.s.B.1e();4 3.13.1Y(d,14)}m{6(((r=B.V)!=9?r.1v:w 0)!=9){4 V.1v("8.C 2C 2D\'t 2E 3 A.")}}};8.7.O=5(c){o d,K,15,14,z,r;6(3.s.B.1e!=9){14=1x(5(a){o b,n,j,z;z=3.13.1I(c);j=a.j;6(!a.1o&&!a.n){6(3.13.2n(j,z)){n=j.n;b=j.j;b.1c(j);b.Y(a,n);4}}n=a.n;j.1c(a);z.25(a);4 j.Y(z,n)},3);15=3.s.B.1e();4 3.13.1Y(15,14)}m 6(3.s.p.15!=9){3.s.B.3u();K=3.s.p.15.3v();z=3.13.1I(c);z.X=K.3w;d=p.1J(\'2m\');d.25(z);4 K.3x(d.X)}m{6(((r=B.V)!=9?r.1v:w 0)!=9){4 V.1v("8.O 2C 2D\'t 2E 3 A.")}}};8.7.E=5(){6(3.s.B.1e!=9){4 2}m 6(3.s.p.15!=9){4 1}4 0};8.7.3y=5(){4 3.s.P.X};8.7.2t=5(a){4 3.s.P.X=a};8.7.3z=5(a){6(3.E()===2){4 3.O("<h"+a+">")}m{4 3.k(\'3A\',"<h"+a+">")}};8.7.1s=5(){6(3.E()>0){4 3.O(\'<2F>\')}m{4 3.k(\'1s\')}};8.7.2F=8.1s;8.7.1t=5(){6(3.E()>0){4 3.O(\'<2G>\')}m{4 3.k(\'1t\')}};8.7.2G=8.1t;8.7.24=5(){6(3.E()>0){4 3.O(\'<3B>\')}m{4 3.k(\'24\')}};8.7.1u=5(){6(3.E()>0){4 3.O(\'<2H>\')}m{4 3.k(\'1u\')}};8.7.2H=8.1u;8.7.22=5(){6(3.E()>0){4 3.O(\'<3C>\')}m{4 3.k(\'22\')}};8.7.23=5(){6(3.E()>0){4 3.O(\'<3D>\')}m{4 3.k(\'23\')}};8.7.3E=5(a){6(3.E()===2){4 3.C({3F:a})}m{4 3.k(\'3G\',a)}};8.7.3H=5(a){o b;6(3.E()===2){3.C({3I:a})}m{6(3.A.A===\'1i\'){b=\'3J\'}m{b=\'3K\'}}4 3.k(b,a)};8.7.3L=5(a){6(3.E()===2){4 3.C({3M:a})}m{4 3.k(\'3N\',a)}};8.7.2I=5(a){6(3.E()===2){4 3.C({2I:a})}m{4 3.k(\'3O\',a)}};8.7.2J=5(){4 3.k(\'2J\')};8.7.2K=5(){4 3.k(\'2K\')};8.7.3P=5(a){4 3.k(\'3Q\',a)};8.7.3R=5(a){4 3.k(\'3S\',a)};8.7.3T=5(){4 3.k(\'3U\')};8.7.3V=5(){4 3.k(\'2v\')};8.7.3W=5(){4 3.k(\'3X\')};8.7.2L=5(){4 3.k(\'2L\')};8.7.2M=5(){4 3.k(\'2M\')};8.7.2N=5(){4 3.k(\'2N\')};8.7["2O"]=5(){4 3.k(\'2O\')};8.7.2P=5(){4 3.k(\'2P\')};8.7.2Q=5(){4 3.k(\'2Q\')};8.7.3Y=5(){4 3.k(\'2w\')};8.7.3Z=5(){4 3.k(\'2x\')};8.7.40=5(){4 3.k(\'2y\')};8.7.41=5(){4 3.k(\'2z\')};8.7.42=5(){4 3.k(\'43\')};8.7.2R=5(){4 3.k(\'2R\')};4 8})()}).2A(3);',62,252,'|||this|return|function|if|prototype|Richarea|null||||||||||parentNode|execCommandAndWait||else|nextSibling|var|document|identify|_ref|raw||navigator|string|void|subString|DOMMunipulator|wrap|browser|window|style|iframe|isSurroundSupport|RawController|_results|value|length|_i|range|userAgent|startContainer|key|surround|body|false|true|text|textNode|startLeaf|console|versionSearch|innerHTML|insertBefore|endOffset|for|_len|startOffset|munipulator|surroundCallback|selection|queryCommandState|queryCommandEnabled|execCommand|isLeaf|while|execAtLeaf|removeChild|endLeaf|getSelection|substring|Chrome|vendor|Firefox|queryCommandIndeterm|queryCommandSupported|queryCommandValue|result|in|previousSibling|middle|right|warn|bold|italic|strikethrough|error|indexOf|__bind|searchString|An|unknown|searchVersion|versionSearchString|OmniWeb|Netscape|Mozilla|platform|firstChild|createElementFromHTML|createElement|c2|c3|deepEqual|_ref2|tagName|toLowerCase|getAttribute|dig|next|previous|createTextNode|execAtNode|childNodes|push|execAtSelection|nextLeaf|new|case|subscript|superscript|underline|appendChild|dataBrowser|OS|dataOS|prop|Version|iCab|Camino|MSIE|Mac|iPhone|Linux|contentDocument|contentWindow|spellcheck|contentEditable|designMode|div|compare|instanceof|className|jQuery|split|join|setValue|switch|insertunorderedlist|justifycenter|justifyfull|justifyleft|justifyright|call|span|method|doesn|support|strong|em|del|fontSize|indent|outdent|copy|cut|paste|delete|undo|redo|unselect|Array|apply|arguments|version|appVersion|parseFloat|Apple|Safari|opera|Opera|KDE|Konqueror|Explorer|Gecko|rv|Win|Windows|iPad|On|Object|lastChild|textContent|isCollapsed|Nothing|has|selected|getRangeAt|endContainer|removeAllRanges|break|get|lt|gt|insertorderlist|unlink|is|not|enabled|focus|createRange|htmlText|pasteHTML|getValue|heading|formatblock|ins|sub|sup|foreColor|color|forecolor|backColor|backgroundColor|hilitecolor|backcolor|fontName|fontFamily|fontname|fontsize|insertLink|createlink|insertImage|insertimage|insertOrderedList|insertorderedlist|insertUnorderedList|insertHorizontalRule|inserthorizontalrule|justifyCenter|justifyFull|justifyLeft|justifyRight|selectAll|selectall'.split('|'),0,{}))
