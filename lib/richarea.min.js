/*
Richarea

Cross browser richarea (iframe) munipulator script written in CoffeeScript

:Author: Alisue (lambdalisue@hashnote.net)
:License: MIT License
:Url: http://github.com/lambdalisue/Richarea
:Version: 0.1.1
:Reference:
- http://help.dottoro.com/ljcvtcaw.php
- http://wiki.bit-hive.com/tomizoo/pg/JavaScript%20Range%A4%CE%BB%C8%A4%A4%CA%FD
- http://www.mozilla-japan.org/editor/midas-spec.html
- https://bugzilla.mozilla.org/show_bug.cgi?id=297494
*/
eval(function(p,a,c,k,e,d){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('(5(){n S,A,J;n 2U=4t.7.2l||5(3i){1d(n i=0,l=3.P;i<l;i++){6(3[i]===3i)4 i}4-1},1V=5(3h,3g){4 5(){4 3h.4s(3g,4r)}};S=(5(){5 S(){3.C=3.2o(3.3e)||"2q 2p C";3.4q=3.2m(r.V)||3.2m(r.4p)||"2q 2p C";3.3f=3.2o(3.38)||"2q 2p 3f"}S.7.2o=5(2n){n Q,O,1g,w;w=[];1d(O=0,1g=2n.P;O<1g;O++){Q=2n[O];3.2j=Q.1a||Q.o;6(Q.s!=9){6(Q.s.2l(Q.v)!==-1){4 Q.o}e 6(Q.3d){4 Q.o}}}4 w};S.7.2m=5(2k){n 1K;1K=2k.2l(3.2j);6(1K===-1){4}4 4o(2k.1G(1K+3.2j.P+1))};S.7.3e=[{s:r.V,v:\'1C\',o:\'1C\'},{s:r.V,v:\'2i\',1a:\'2i/\',o:\'2i\'},{s:r.1J,v:\'4n\',o:\'4m\',1a:\'3c\'},{3d:E.4l,o:\'4k\',1a:\'3c\'},{s:r.1J,v:\'3b\',o:\'3b\'},{s:r.1J,v:\'4j\',o:\'4i\'},{s:r.V,v:\'1r\',o:\'1r\'},{s:r.1J,v:\'3a\',o:\'3a\'},{s:r.V,v:\'2h\',o:\'2h\'},{s:r.V,v:\'39\',o:\'4h\',1a:\'39\'},{s:r.V,v:\'4g\',o:\'2g\',1a:\'4f\'},{s:r.V,v:\'2g\',o:\'2h\',1a:\'2g\'}];S.7.38=[{s:r.2f,v:\'4e\',o:\'4d\'},{s:r.2f,v:\'37\',o:\'37\'},{s:r.V,v:\'36\',o:\'36/4c\'},{s:r.2f,v:\'35\',o:\'35\'}];4 S})();J=(5(){5 J(u){3.u=u;6(3.u.34!=9){3.k=3.u.34}e{3.k=3.u.30.k}3.k.4b(\'<M></M>\');3.M=3.k.M;6(3.M.33!=9){3.M.33=Z}6(3.M.32!=9){3.M.32=10}e 6(3.k.31!=9){3.k.31=\'4a\'}3.E=3.u.30}J.7.1k=5(a){4 3.k.1k(a)};J.7.1n=5(a){4 3.k.1n(a)};J.7.1B=5(a){4 3.k.1B(a)};J.7.1A=5(a){4 3.k.1A(a)};J.7.1z=5(a){4 3.k.1z(a)};J.7.1m=5(a,x,f){6(x==9){x=Z}6(f==9){f=9}4 3.k.1m(a,x,f)};4 J})();A=(5(){5 A(){}A.7.1q=5(d){4!(d.29!=9)};A.7.1T=5(G){n X;X=k.1S(\'2Q\');X.15=G;4 X.29};A.7.2R=5(19,18){n 2c,2b,2a,2e,m,2d;2e=5(19,18){n z,1I,f;1d(z 1x 19){f=19[z];6(f 2Y 49){1I=2e(f,18[z])}e{1I=f===18[z]}6(!1I){4 Z}}4 10};2c=((m=19.1Y)!=9?m.1X():q 0)===((2d=18.1Y)!=9?2d.1X():q 0);2b=19.2Z===18.2Z;2a=19.1W(\'B\')===18.1W(\'B\');4 2c&&2b&&2a};A.7.L=5(d,1H){n 1f;6(1H==9){1H=Z}1f=1H?\'48\':\'29\';1l(!3.1q(d)){d=d[1f]}4 d};A.7.24=5(d,L){6(L==9){L=Z}1l(!d.g){d=d.b;6(!d){4 9}}d=d.g;6(L){d=3.L(d,Z)}4 d};A.7.25=5(d,L){6(L==9){L=Z}1l(!d.1w){d=d.b;6(!d){4 9}}d=d.1w;6(L){d=3.L(d,10)}4 d};A.7.1p=5(j,K,I,H){n 1F,1E,g,b,1D,13,12;6(I==9){I=q 0}6(H==9){H=q 0}13=j.47;6(I==9){I=0}6(H==9){H=13.P}6(I===0&&H===13.P){4 K(j)}e{1F=13.1G(0,I);1E=13.1G(I,H);1D=13.1G(H,13.P);b=j.b;g=j.g;b.1i(j);6(1F.P>0){12=k.28(1F);b.16(12,g)}6(1E.P>0){12=k.28(1E);b.16(12,g);j=12}6(1D.P>0){12=k.28(1D);b.16(12,g)}4 K(j)}};A.7.27=5(d,K,I,H){n 1f,O,1g,m,w;6(I==9){I=q 0}6(H==9){H=q 0}6(3.1q(d)){4 3.1p(d,K,I,H)}e{m=d.26;w=[];1d(O=0,1g=m.P;O<1g;O++){1f=m[O];w.1Z(3.27(1f,K))}4 w}};A.7.1U=5(D,K){n T,1o,17,23,N,U,11,1e,m,w;6(D.46){6(((m=E.W)!=9?m.1y:q 0)!=9){4 W.1y("45 44 43")}}e{N=D.42(0);U=N.U;1e=N.1e;T=N.T;17=N.17;D.41();6(U===T){4 3.27(U,K,1e,17)}e{6(!3.1q(U)){11=U.26[1e]}e{11=3.24(U,10);3.1p(U,K,1e,q 0)}6(!3.1q(T)){6(17>0){1o=T.26[17-1]}e{1o=3.25(T,10)}}e{1o=3.25(T,10);3.1p(T,K,q 0,17)}w=[];1l(11){23=3.24(11,10);3.1p(11,K);6(11===1o){40}w.1Z(11=23)}4 w}}};4 A})();3.8=(5(){5 8(u){n G;3.u=u;6((E.2X!=9)&&3.u 2Y 2X){3.u=3.u.3Z(0)}3.C=22 S;3.p=22 J(3.u);3.1b=22 A;6(3.u.15!=9){G=3.u.15;G=G.2W(\'&3Y;\').2V(\'<\');G=G.2W(\'&3X;\').2V(\'>\');3.2M(G)}}8.7.1k=5(a){n 21;2T(3.C.C){20\'1C\':4 9;20\'1r\':21=[\'1u\',\'3W\',\'2D\',\'1t\',\'2w\',\'2v\',\'2u\',\'2t\',\'1s\',\'1O\',\'1N\',\'1P\',\'3V\'];6(2U.2r(21,a)<0){4 9}}4 3.p.1k(a)};8.7.1n=5(a){2T(3.C.C){20\'1C\':4 10}4 3.p.1n(a)};8.7.1B=5(a){4 3.p.1B(a)};8.7.1A=5(a){4 3.p.1A(a)};8.7.1z=5(a){4 3.p.1z(a)};8.7.1m=5(a,x,f){n m;6(x==9){x=q 0}6(f==9){f=q 0}6(!3.1n(a)){6(((m=E.W)!=9?m.1y:q 0)!=9){W.1y(""+a+" 3U 3T 3S 1x 3 C")}4}6((x!=9)&&!(f!=9)){f=x;x=Z}4 3.p.1m(a,x,f)};8.7.c=5(a,x,f){n w;6(x==9){x=q 0}6(f==9){f=q 0}3.1m(a,x,f);w=[];1l(3.1k(a)){w.1Z({})}4 w};8.7.B=5(1j){n D,1c,m;6(3.p.E.1h!=9){1c=1V(5(j){n Y,z,g,b,f,y,m;b=j.b;6(!j.1w&&!j.g){6(((m=b.1Y)!=9?m.1X():q 0)===\'2S\'){1d(z 1x 1j){f=1j[z];6(b.B[z]===f){b.B[z]=\'\'}e{b.B[z]=f}}6(b.1W(\'B\')===\'\'){g=b.g;Y=b.b;Y.1i(b);Y.16(j,g)}4}}y=k.1S(\'2S\');1d(z 1x 1j){f=1j[z];y.B[z]=f}g=j.g;b.1i(j);y.1R(j);4 b.16(y,g)},3);D=3.p.E.1h();4 3.1b.1U(D,1c)}e{6(((m=E.W)!=9?m.1v:q 0)!=9){4 W.1v("8.B 2P 2O\'t 2N 3 C.")}}};8.7.R=5(G){n X,N,D,1c,y,m;6(3.p.E.1h!=9){1c=1V(5(j){n Y,g,b,y;y=3.1b.1T(G);b=j.b;6(!j.1w&&!j.g){6(3.1b.2R(b,y)){g=b.g;Y=b.b;Y.1i(b);Y.16(j,g);4}}g=j.g;b.1i(j);y.1R(j);4 b.16(y,g)},3);D=3.p.E.1h();4 3.1b.1U(D,1c)}e 6(3.p.k.D!=9){3.p.E.3R();N=3.p.k.D.3Q();y=3.1b.1T(G);y.15=N.3P;X=k.1S(\'2Q\');X.1R(y);4 N.3O(X.15)}e{6(((m=E.W)!=9?m.1v:q 0)!=9){4 W.1v("8.R 2P 2O\'t 2N 3 C.")}}};8.7.F=5(){6(3.p.E.1h!=9){4 2}e 6(3.p.k.D!=9){4 1}4 0};8.7.3N=5(){4 3.p.M.15};8.7.2M=5(f){4 3.p.M.15=f};8.7.3M=5(1Q){6(3.F()===2){4 3.R("<h"+1Q+">")}e{4 3.c(\'3L\',"<h"+1Q+">")}};8.7.1u=5(){6(3.F()>0){4 3.R(\'<2L>\')}e{4 3.c(\'1u\')}};8.7.2L=8.1u;8.7.1t=5(){6(3.F()>0){4 3.R(\'<2K>\')}e{4 3.c(\'1t\')}};8.7.2K=8.1t;8.7.1P=5(){6(3.F()>0){4 3.R(\'<3K>\')}e{4 3.c(\'1P\')}};8.7.1s=5(){6(3.F()>0){4 3.R(\'<2J>\')}e{4 3.c(\'1s\')}};8.7.2J=8.1s;8.7.1O=5(){6(3.F()>0){4 3.R(\'<3J>\')}e{4 3.c(\'1O\')}};8.7.1N=5(){6(3.F()>0){4 3.R(\'<3I>\')}e{4 3.c(\'1N\')}};8.7.3H=5(14){6(3.F()===2){4 3.B({14:14})}e{4 3.c(\'3G\',14)}};8.7.3F=5(14){n a;6(3.F()===2){3.B({3E:14})}e{6(3.C.C===\'1r\'){a=\'3D\'}e{a=\'3C\'}}4 3.c(a,14)};8.7.3B=5(1M){6(3.F()===2){4 3.B({3A:1M})}e{4 3.c(\'3z\',1M)}};8.7.2I=5(1L){6(3.F()===2){4 3.B({2I:1L})}e{4 3.c(\'3y\',1L)}};8.7.2H=5(){4 3.c(\'2H\')};8.7.2G=5(){4 3.c(\'2G\')};8.7.3x=5(2F){4 3.c(\'3w\',2F)};8.7.3v=5(2E){4 3.c(\'3u\',2E)};8.7.3t=5(){4 3.c(\'3s\')};8.7.3r=5(){4 3.c(\'2D\')};8.7.3q=5(){4 3.c(\'3p\')};8.7.2C=5(){4 3.c(\'2C\')};8.7.2B=5(){4 3.c(\'2B\')};8.7.2A=5(){4 3.c(\'2A\')};8.7["2z"]=5(){4 3.c(\'2z\')};8.7.2y=5(){4 3.c(\'2y\')};8.7.2x=5(){4 3.c(\'2x\')};8.7.3o=5(){4 3.c(\'2w\')};8.7.3n=5(){4 3.c(\'2v\')};8.7.3m=5(){4 3.c(\'2u\')};8.7.3l=5(){4 3.c(\'2t\')};8.7.3k=5(){4 3.c(\'3j\')};8.7.2s=5(){4 3.c(\'2s\')};4 8})()}).2r(3);',62,278,'|||this|return|function|if|prototype|Richarea|null|command|parentNode|execCommandAndWait|node|else|value|nextSibling|||leaf|document||_ref|var|identify|raw|void|navigator|string||iframe|subString|_results|ui|wrap|key|DOMMunipulator|style|browser|selection|window|isSurroundSupport|html|end|start|RawController|callback|dig|body|range|_i|length|row|surround|Browser|endContainer|startContainer|userAgent|console|container|grandParentNode|false|true|startLeaf|textNode|text|color|innerHTML|insertBefore|endOffset|rhs|lhs|versionSearch|munipulator|surroundCallback|for|startOffset|child|_len|getSelection|removeChild|sets|queryCommandState|while|execCommand|queryCommandEnabled|endLeaf|execAtLeaf|isLeaf|Firefox|strikethrough|italic|bold|error|previousSibling|in|warn|queryCommandValue|queryCommandSupported|queryCommandIndeterm|Chrome|right|middle|left|substring|reverse|result|vendor|index|size|name|superscript|subscript|underline|level|appendChild|createElement|createElementFromHTML|execAtSelection|__bind|getAttribute|toLowerCase|tagName|push|case|WORKS|new|nextLeaf|next|previous|childNodes|execAtNode|createTextNode|firstChild|c3|c2|c1|_ref2|deepEqual|platform|Mozilla|Netscape|OmniWeb|versionSearchString|dataString|indexOf|searchVersion|data|searchString|unknown|An|call|unselect|justifyright|justifyleft|justifyfull|justifycenter|redo|undo|delete|paste|cut|copy|insertunorderedlist|src|href|outdent|indent|fontSize|del|em|strong|setValue|support|doesn|method|div|compare|span|switch|__indexOf|join|split|jQuery|instanceof|className|contentWindow|designMode|contentEditable|spellcheck|contentDocument|Linux|iPhone|Mac|dataOS|MSIE|Camino|iCab|Version|prop|dataBrowser|OS|me|fn|item|selectall|selectAll|justifyRight|justifyLeft|justifyFull|justifyCenter|inserthorizontalrule|insertHorizontalRule|insertUnorderedList|insertorderedlist|insertOrderedList|insertimage|insertImage|createlink|insertLink|fontsize|fontname|fontFamily|fontName|backcolor|hilitecolor|backgroundColor|backColor|forecolor|foreColor|sup|sub|ins|formatblock|heading|getValue|pasteHTML|htmlText|createRange|focus|enabled|not|is|unlink|insertorderlist|gt|lt|get|break|removeAllRanges|getRangeAt|selected|has|Nothing|isCollapsed|textContent|lastChild|Object|On|writeln|iPad|Windows|Win|rv|Gecko|Explorer|Konqueror|KDE|Opera|opera|Safari|Apple|parseFloat|appVersion|version|arguments|apply|Array'.split('|')))
